<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Chigga Land</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div id="app">
      <!-- Full Screen Game -->
      <canvas id="gameCanvas"></canvas>

      <!-- Top Left: Profile & Stats -->
      <div class="hud-panel" id="stats-bar">
        <div class="logo">ğŸ° Chigga Land</div>
        <div id="turn-indicator" class="badge">Waiting for P1...</div>
        <div id="vp-badge">ğŸ† 0 VP</div>
        <button
          id="resetGameBtn"
          class="btn-sec"
          style="font-size: 12px; padding: 5px 10px"
        >
          ğŸ”„ Reset
        </button>
      </div>

      <!-- Top Right: Dynamic Player List -->
      <div class="hud-panel" id="player-list">
        <!-- Filled by JS: Avatar | Name | Cards | Army -->
      </div>

      <!-- Right Side: Active Trades -->
      <div id="trade-sidebar" class="hud-panel">
        <h3>Active Trades</h3>
        <div id="trade-feed"></div>
      </div>

      <!-- Bottom Left: Activity Feed (Discord Style) -->
      <div class="hud-panel" id="chat-panel">
        <div id="game-log">
          <div id="chat-messages"></div>
        </div>
        <div class="chat-input-wrapper">
          <input
            type="text"
            id="chatInput"
            placeholder="Say something..."
            maxlength="200"
          />
          <button id="sendChatBtn">â¤</button>
        </div>
      </div>

      <!-- Bottom Center: Hand & Action Bar -->
      <div id="action-dock">
        <div id="hand-container"><!-- JS injects card divs here --></div>
        <div class="separator"></div>
        <div id="controls">
          <button id="rollDiceBtn" class="btn-main">ğŸ² Roll</button>
          <button id="tradeBtn" class="btn-sec">ğŸ¤ Trade</button>
          <button id="buildRoadBtn" class="btn-sec" title="Road">ğŸ›£ï¸</button>
          <button id="buildSettlementBtn" class="btn-sec" title="Settlement">
            ğŸ 
          </button>
          <button id="buildCityBtn" class="btn-sec" title="City">ğŸ°</button>
          <button id="buyDevCardBtn" class="btn-sec" title="Dev Card">
            ğŸƒ
          </button>
          <button id="endTurnBtn" class="btn-danger">ğŸ›‘ End</button>
        </div>
      </div>

      <!-- Floating Trade Offer (Hidden by default) -->
      <div id="activeOffers" class="toast-container">
        <!-- JS injects offers here -->
      </div>
    </div>

    <!-- Modals (Keep existing functionality) -->
    <div id="joinModal" class="modal">
      <div class="modal-content">
        <h1>Welcome to Chigga Land</h1>
        <input type="text" id="nicknameInput" placeholder="Enter your name" />
        <br />
        <button id="joinGameBtn" class="primary">Join Game</button>
      </div>
    </div>

    <div id="tradeModal" class="modal hidden">
      <div class="modal-content">
        <h2>Trading</h2>
        <div
          style="
            display: flex;
            justify-content: space-around;
            margin-bottom: 20px;
          "
        >
          <div>
            <h3>Offer</h3>
            <select id="offerRes">
              <option>wood</option>
              <option>brick</option>
              <option>sheep</option>
              <option>wheat</option>
              <option>ore</option>
            </select>
            <input
              type="number"
              id="offerAmt"
              value="1"
              min="1"
              style="width: 50px"
            />
          </div>
          <div>
            <h3>Request</h3>
            <select id="reqRes">
              <option>wood</option>
              <option>brick</option>
              <option>sheep</option>
              <option>wheat</option>
              <option>ore</option>
            </select>
            <input
              type="number"
              id="reqAmt"
              value="1"
              min="1"
              style="width: 50px"
            />
          </div>
        </div>
        <button id="postTradeBtn" class="primary">Post Offer</button>
        <button
          onclick="document.getElementById('tradeModal').classList.add('hidden')"
          style="margin-left: 10px"
        >
          Close
        </button>

        <hr style="margin: 20px 0; border-color: rgba(255, 255, 255, 0.1)" />

        <h3>Bank Trade (4:1)</h3>
        <select id="bankGive">
          <option>wood</option>
          <option>brick</option>
          <option>sheep</option>
          <option>wheat</option>
          <option>ore</option>
        </select>
        <span>&rarr;</span>
        <select id="bankGet">
          <option>wood</option>
          <option>brick</option>
          <option>sheep</option>
          <option>wheat</option>
          <option>ore</option>
        </select>
        <button id="bankTradeBtn">Trade</button>
      </div>
    </div>

    <!-- Dice Container -->
    <div id="dice-container" class="hidden">
      <div id="dice1" class="dice">
        <div class="pip"></div>
        <div class="pip"></div>
        <div class="pip"></div>
        <div class="pip"></div>
        <div class="pip"></div>
        <div class="pip"></div>
        <div class="pip"></div>
        <div class="pip"></div>
        <div class="pip"></div>
      </div>
      <div id="dice2" class="dice">
        <div class="pip"></div>
        <div class="pip"></div>
        <div class="pip"></div>
        <div class="pip"></div>
        <div class="pip"></div>
        <div class="pip"></div>
        <div class="pip"></div>
        <div class="pip"></div>
        <div class="pip"></div>
      </div>
    </div>

    <!-- Dev Card Reveal Container -->
    <div id="dev-card-reveal" class="hidden">
      <div class="card-inner">
        <div class="card-front">
          <div class="card-logo">?</div>
          <div>Dev Card</div>
        </div>
        <div class="card-back">
          <div id="revealed-card-title">Knight</div>
          <div id="revealed-card-desc">Move the robber</div>
        </div>
      </div>
    </div>

    <!-- Start Game Button (Overlay) -->
    <div
      id="start-overlay"
      style="
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        z-index: 100;
        pointer-events: none;
      "
    >
      <button
        id="startGameBtn"
        class="primary"
        style="
          pointer-events: auto;
          display: none;
          font-size: 24px;
          padding: 15px 30px;
        "
      >
        Start Game
      </button>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script src="shared.js"></script>
    <script src="client.js"></script>
  </body>
</html>
